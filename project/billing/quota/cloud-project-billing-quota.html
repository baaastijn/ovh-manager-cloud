<div class="cloud-billing-quota cui-page__content">

    <!-- INIT LOADER -->
    <div class="col-xs-12 text-center" data-ng-if="CloudProjectBillingQuotaCtrl.loader.quota">
        <oui-spinner></oui-spinner>
    </div>

    <!-- UNLEASH LOADER -->
    <div class="col-xs-12 text-center" data-ng-if="CloudProjectBillingQuotaCtrl.loader.unleash">
        <oui-spinner></oui-spinner>
    </div>

    <div data-ng-if="!CloudProjectBillingQuotaCtrl.loader.quota && !CloudProjectBillingQuotaCtrl.loader.unleash">

        <!-- THERE IS NO PAYMENT MEAN - SHOW A MESSAGE TO ADD IT -->
        <div data-ng-if="CloudProjectBillingQuotaCtrl.state.isRestrictedQuota && !CloudProjectBillingQuotaCtrl.datas.defaultPaymentMean">

            <div class="well">

                <p class="bold">{{ :: 'cpb_quota_restricted_account' | translate }}</p>
                <p data-translate="cpb_quota_restricted_account_unlock"
                   data-translate-values="{'url': CloudProjectBillingQuotaCtrl.paymentmeanUrl}">
                </p>

            </div>

        </div>

        <!-- THERE IS A PAYMENT MEAN BUT QUOTA IS RESTRICTED -  -->
         <div data-ng-if="CloudProjectBillingQuotaCtrl.state.isRestrictedQuota && CloudProjectBillingQuotaCtrl.datas.defaultPaymentMean">

            <div class="well">

                <p class="bold">{{ :: 'cpb_quota_restricted_paymentmean_active' | translate }}</p>
                <button class="oui-button oui-button_primary"
                        data-ng-click="CloudProjectBillingQuotaCtrl.unleashAccount()">
                    {{ :: 'cpb_quota_restricted_unlock_button' | translate }}
                </button>

            </div>

        </div>

        <!-- ITS NOT RESTRICTED AND THERE IS A PAYMENT MEAN -->
        <div class="well" data-ng-if="!CloudProjectBillingQuotaCtrl.state.isRestrictedQuota">

            <p class="bold">{{ :: 'cpb_quota_protect_explain' | translate }}</p>

            <p write-right-required>{{ :: 'cpb_quota_protect_more' | translate }}</p>

            <button type="button"
                    class="oui-button oui-button_primary"
                    data-ng-disabled="!CloudProjectBillingQuotaCtrl.datas.quota || (CloudProjectBillingQuotaCtrl.datas.quota && CloudProjectBillingQuotaCtrl.datas.quota.length === 0)"
                    data-ng-click="CloudProjectBillingQuotaCtrl.openSupport()"
                    write-right-required>
                {{ :: 'cpb_quota_protect_more_btn' | translate }}
            </button>

        </div>

        <!-- QUOTA TABLE -->
        <strong>{{ :: 'cpb_quota_current_limit' | translate }}</strong>

        <oui-datagrid rows="CloudProjectBillingQuotaCtrl.datas.quota">
            <oui-column title="'cloud_common_region' | translate" property="region" sortable>
                <div class="flag-box">
                    <div class="flag-wrapper inline-block vertical-middle">
                        <span class="flag-icon {{ :: CloudProjectBillingQuotaCtrl.regionService.getRegionIconFlag($row.region) }} flag"></span>
                    </div>
                    <div class="flag-text inline-block left-space-m8 top-space-m8 vertical-middle">
                        {{ :: CloudProjectBillingQuotaCtrl.regionService.getTranslatedMicroRegion($row.region) }}
                    </div>
                </div>
            </oui-column>
            <oui-column title="'cloud_common_instance' | translate" property="instance.maxInstances">
                <span data-ng-if="$row.instance.maxInstances === -1">
                    {{ :: $row.instance.usedInstances }} / {{ :: 'cpb_quota_instance_unlimited' | translate }}
                </span>
                <span data-ng-if="$row.instance.maxInstances !== -1">
                    {{ :: $row.instance.usedInstances }} / {{ :: $row.instance.maxInstances }}
                </span>
            </oui-column>
            <oui-column title="'cloud_common_core' | translate" property="instance.maxCores">
                <span data-ng-if="$row.instance.maxCores === -1">
                    {{ :: $row.instance.usedCores }} / {{ :: 'cpb_quota_instance_unlimited' | translate }}
                </span>
                <span data-ng-if="quota.instance.maxCores !== -1">
                    {{ :: $row.instance.usedCores }} / {{ :: $row.instance.maxCores }}
                </span>
            </oui-column>
            <oui-column title="'cloud_common_ram' | translate" property="instance.maxRam">
                <span data-ng-if="$row.instance.maxRam === -1">
                    {{ :: $row.instance.usedRAM > 0 ? (($row.instance.usedRAM * 1000000) | bytes:2) : $row.instance.usedRAM }} / {{ :: 'cpb_quota_instance_unlimited' | translate }}
                </span>
                <span data-ng-if="$row.instance.maxRam !== -1">
                    {{ :: $row.instance.usedRAM > 0 ? (($row.instance.usedRAM * 1000000) | bytes:2) : $row.instance.usedRAM }} / {{ :: ($row.instance.maxRam * 1000000) | bytes:2 }}
                </span>
            </oui-column>
            <oui-column title="'cpb_quota_add_disk' | translate" property="volume.maxGigabytes">
                <span data-ng-if="$row.volume.maxGigabytes === -1">
                    {{ :: $row.volume.usedGigabytes > 0 ? (($row.volume.usedGigabytes * 1000000000) | bytes:2) : $row.volume.usedGigabytes }} / {{ :: 'cpb_quota_instance_unlimited' | translate }}
                </span>
                <span data-ng-if="$row.volume.maxGigabytes !== -1">
                    {{ :: $row.volume.usedGigabytes > 0 ? (($row.volume.usedGigabytes * 1000000000) | bytes:2) : $row.volume.usedGigabytes }} / {{ :: ($row.volume.maxGigabytes * 1000000000) | bytes:2 }}
                </span>
            </oui-column>
        </oui-datagrid>

    </div>

</div>
